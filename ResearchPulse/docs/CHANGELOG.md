# 更新日志

所有重要的更改都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [Unreleased]

### 文档

- README 新增“管理后台功能增强”章节，并补充后台规划链接
- 补充 Sphinx 兼容 docstring 规范说明与文档维护提示

## [2.1.0] - 2026-02-14

### 新增

- **AI 内容分析** (`apps/ai_processor/`)
  - 基于 Ollama/OpenAI 的文章摘要生成
  - 自动分类和重要性评分（1-10）
  - 关键要点提取和影响评估
  - 可执行行动项提取
  - Token 用量统计
  - 支持批量处理（单次最多 100 篇）
  - 结果缓存（默认 TTL 24h）

- **向量嵌入** (`apps/embedding/`)
  - 基于 sentence-transformers 的文章向量化
  - Milvus 向量数据库存储与检索
  - 语义相似文章推荐
  - 支持批量计算（单次最多 1000 篇）
  - 索引重建功能

- **事件聚类** (`apps/event/`)
  - 基于规则权重 + 语义相似度的混合聚类
  - 事件时间线追踪
  - 可配置聚类参数（权重、相似度阈值）

- **话题雷达** (`apps/topic/`)
  - 自动发现新兴话题
  - 话题趋势追踪（上升/下降/稳定）
  - 手动创建和管理话题
  - 话题关联文章检索
  - 可配置发现参数（最小频率、回溯天数）

- **行动项管理** (`apps/action/`)
  - 从文章中提取可执行行动项
  - 支持优先级设置（高/中/低）
  - 完成/忽略状态管理
  - 按用户隔离

- **报告生成** (`apps/report/`)
  - 自动生成周报/月报
  - 汇总期间研究动态和统计
  - 报告查看与删除

- **功能开关系统** (`common/feature_config.py`)
  - 所有高级功能独立启停
  - 通过管理 API 动态切换
  - 数据库持久化，内存缓存（60s TTL）
  - 10 个功能开关覆盖所有模块

- **新增定时任务**
  - AI 分析任务（每 1 小时，处理 50 篇）
  - 向量嵌入任务（每 2 小时，处理 100 篇）
  - 事件聚类任务（每天凌晨 2 点，处理 200 篇）
  - 话题发现任务（每周一凌晨 1 点）

- **管理后台增强**
  - 功能开关管理 API
  - 调度任务管理 API（查看/修改/手动触发）
  - 配置分组查看和批量更新
  - 备份管理 API

- **认证增强**
  - Refresh Token 支持
  - 修改密码 API
  - 登出 API

### 技术栈新增

- Milvus 2.3+ 向量数据库
- Ollama 本地 AI 推理
- sentence-transformers 向量嵌入
- `docker-compose.milvus.yml` Milvus 部署配置

---

## [2.0.0] - 2026-02-13

### 新增

- **用户系统**
  - 用户注册、登录
  - JWT Token 认证
  - RBAC 权限管理
  - 超级管理员支持

- **订阅管理**
  - 用户可订阅 ArXiv 类目
  - 用户可订阅 RSS 源
  - 用户可订阅微信公众号

- **邮件推送**
  - SMTP / SendGrid / Mailgun / Brevo 支持
  - 多端口自动重试
  - 用户可配置推送频率
  - 超级管理员默认不推送

- **Markdown 导出**
  - 一键导出当前筛选文章
  - 支持按来源、分类、时间筛选
  - 用户订阅导出

- **管理后台**
  - 用户管理
  - 爬虫配置
  - 系统设置
  - 邮件推送配置

- **微信爬虫**
  - RSS Feed 解析
  - 图片本地缓存
  - 多账号批量爬取

- **HTTP 增强**
  - User-Agent 轮换（10种）
  - 连接池自动轮换
  - Rate Limit 自动处理
  - 请求缓存

- **前端功能**
  - 导航首页
  - 来源筛选（ArXiv/RSS/微信）
  - 分类联动筛选
  - 中英对照翻译链接
  - 谷歌翻译链接

### 改进

- 数据库使用 MySQL 替代 SQLite
- 全异步架构
- 统一的日志系统
- 配置文件分离（敏感/非敏感）

### 技术栈

- FastAPI 替代 Flask
- SQLAlchemy 2.0 ORM
- APScheduler 定时任务
- httpx 异步 HTTP 客户端

---

## [1.0.0] - 2025-xx-xx

### 新增

- ArXiv 论文抓取
- RSS 文章抓取
- 微信公众号抓取
- 基础前端展示
- 邮件通知功能
- Markdown 输出

---

## 版本规划

### [2.2.0] - 计划中

- [ ] 文章推荐算法
- [ ] 阅读进度追踪
- [ ] 移动端适配
- [ ] WebSocket 实时推送
- [ ] 社交功能（评论、分享）
- [ ] 高级搜索
- [ ] 数据分析仪表盘

---

## 贡献

欢迎提交 Issue 和 Pull Request！

---

## 版本号说明

- **主版本号**: 不兼容的 API 更改
- **次版本号**: 向下兼容的功能新增
- **修订号**: 向下兼容的问题修复
