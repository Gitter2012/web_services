<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆæµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background: #45a049;
        }
        #log {
            background: #222;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            height: 400px;
            overflow-y: auto;
            font-family: monospace;
            margin-top: 20px;
        }
        .log-entry {
            margin: 5px 0;
        }
        .log-success { color: #0f0; }
        .log-error { color: #f00; }
        .log-info { color: #0ff; }
    </style>
</head>
<body>
    <h1>ğŸ² å¾·å·æ‰‘å…‹æ¸¸æˆæµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•æ§åˆ¶</h2>
        <button onclick="openGameInNewTab()">ğŸš€ åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€æ¸¸æˆ</button>
        <button onclick="testAudioContext()">ğŸ”Š æµ‹è¯•éŸ³æ•ˆç³»ç»Ÿ</button>
        <button onclick="clearLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•è¯´æ˜</h2>
        <ol>
            <li>ç‚¹å‡»"åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€æ¸¸æˆ"æŒ‰é’®</li>
            <li>åœ¨æ¸¸æˆé¡µé¢è¾“å…¥æ˜µç§°å¹¶åŠ å…¥æ¸¸æˆ</li>
            <li>æ·»åŠ è‡³å°‘2ä¸ªAIç©å®¶ï¼ˆå»ºè®®3-4ä¸ªï¼‰</li>
            <li>ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®</li>
            <li>è§‚å¯Ÿä»¥ä¸‹åŠŸèƒ½ï¼š
                <ul>
                    <li>âœ… å‘ç‰ŒåŠ¨ç”»ï¼šå¡ç‰Œä»é¡¶éƒ¨é£å…¥ï¼Œå¸¦æœ‰ç¼“åŠ¨æ•ˆæœ</li>
                    <li>âœ… å‘ç‰ŒéŸ³æ•ˆï¼šæ¯å¼ ç‰Œå‘å‡ºæ—¶éƒ½æœ‰"å—–"çš„å£°éŸ³</li>
                    <li>âœ… å…¬å…±ç‰Œç¿»å¼€ï¼šFlopï¼ˆ3å¼ ï¼‰ï¼ŒTurnï¼ˆ1å¼ ï¼‰ï¼ŒRiverï¼ˆ1å¼ ï¼‰ä¾æ¬¡ç¿»å¼€</li>
                    <li>âœ… ç¿»ç‰ŒéŸ³æ•ˆï¼šæ¯æ¬¡ç¿»ç‰Œæœ‰ç‹¬ç‰¹çš„éŸ³æ•ˆ</li>
                    <li>âœ… ç©å®¶æ“ä½œï¼šå¼ƒç‰Œã€è¿‡ç‰Œã€è·Ÿæ³¨ã€åŠ æ³¨</li>
                    <li>âœ… æ“ä½œéŸ³æ•ˆï¼šä¸åŒæ“ä½œæœ‰ä¸åŒéŸ³æ•ˆ</li>
                    <li>âœ… åŠ¨ä½œæç¤ºï¼šå±å¹•ä¸Šæ˜¾ç¤ºæµ®åŠ¨æ–‡å­—æç¤º</li>
                    <li>âœ… å½“å‰ç©å®¶é«˜äº®ï¼šè½®åˆ°è°æ“ä½œï¼Œè°çš„å¡ç‰‡ä¼šå‘å…‰é—ªçƒ</li>
                    <li>âœ… åº•æ± æ›´æ–°åŠ¨ç”»ï¼šåº•æ± é‡‘é¢å˜åŒ–æ—¶æœ‰è„‰å†²åŠ¨ç”»</li>
                    <li>âœ… ç»“æœå±•ç¤ºï¼šè·èƒœè€…é«˜äº®ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆ</li>
                    <li>âœ… è·èƒœåŠ¨ç”»ï¼šè·èƒœç©å®¶å¡ç‰‡æœ‰ç‰¹æ®Šçš„è„‰å†²å…‰æ™•æ•ˆæœ</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="test-section">
        <h2>é¢„æœŸæµ‹è¯•ç»“æœ</h2>
        <ul>
            <li><strong>éŸ³æ•ˆç³»ç»Ÿï¼š</strong>æ‰€æœ‰æ¸¸æˆäº‹ä»¶éƒ½åº”è¯¥æœ‰ç›¸åº”çš„éŸ³æ•ˆåé¦ˆ</li>
            <li><strong>åŠ¨ç”»æµç•…ï¼š</strong>æ‰€æœ‰åŠ¨ç”»åº”è¯¥æµç•…è‡ªç„¶ï¼Œæ— å¡é¡¿</li>
            <li><strong>è§†è§‰åé¦ˆï¼š</strong>ç©å®¶èƒ½æ¸…æ¥šåœ°çœ‹åˆ°æ¸¸æˆè¿›ç¨‹å’Œè½®åˆ°è°æ“ä½œ</li>
            <li><strong>AIè¡Œä¸ºï¼š</strong>AIåº”è¯¥èƒ½è‡ªåŠ¨åšå‡ºå†³ç­–ï¼ˆå¼ƒç‰Œã€è·Ÿæ³¨ã€åŠ æ³¨ç­‰ï¼‰</li>
            <li><strong>æ¸¸æˆå®Œæ•´æ€§ï¼š</strong>ä»å‘ç‰Œåˆ°ç»“ç®—çš„å®Œæ•´æµç¨‹æ­£å¸¸è¿è¡Œ</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•æ—¥å¿—</h2>
        <div id="log"></div>
    </div>

    <script>
        function getBasePath() {
            const path = window.location.pathname || '';
            if (path === '/' || path === '') {
                return '';
            }

            let base = path;
            if (base.endsWith('/')) {
                base = base.slice(0, -1);
            }
            if (base.endsWith('.html')) {
                base = base.slice(0, base.lastIndexOf('/'));
            }

            return base;
        }

        const basePath = getBasePath();

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
            log('æ—¥å¿—å·²æ¸…ç©º', 'info');
        }

        function openGameInNewTab() {
            const gameUrl = window.location.origin + basePath + '/';
            window.open(gameUrl, '_blank');
            log('å·²åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€æ¸¸æˆ', 'success');
            log('è¯·åœ¨æ¸¸æˆé¡µé¢å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š', 'info');
            log('1. è¾“å…¥æ˜µç§°åŠ å…¥æ¸¸æˆ', 'info');
            log('2. æ·»åŠ 2-4ä¸ªAIç©å®¶', 'info');
            log('3. ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"', 'info');
            log('4. è§‚å¯ŸéŸ³æ•ˆå’ŒåŠ¨ç”»æ•ˆæœ', 'info');
        }

        function testAudioContext() {
            log('å¼€å§‹æµ‹è¯•éŸ³æ•ˆç³»ç»Ÿ...', 'info');
            
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) {
                log('âŒ æµè§ˆå™¨ä¸æ”¯æŒWeb Audio API', 'error');
                return;
            }
            
            log('âœ… Web Audio API å¯ç”¨', 'success');
            
            const audioContext = new AudioContext();
            log('âœ… AudioContext åˆ›å»ºæˆåŠŸ', 'success');
            
            // æµ‹è¯•æ’­æ”¾ä¸€ä¸ªç®€å•çš„éŸ³æ•ˆ
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 440; // A4éŸ³ç¬¦
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
            
            log('âœ… æµ‹è¯•éŸ³æ•ˆå·²æ’­æ”¾ï¼ˆ440Hzæ­£å¼¦æ³¢ï¼‰', 'success');
            log('å¦‚æœå¬åˆ°äº†"å“”"çš„ä¸€å£°ï¼Œè¯´æ˜éŸ³æ•ˆç³»ç»Ÿæ­£å¸¸å·¥ä½œ', 'info');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = function() {
            log('ğŸ® æ¸¸æˆæµ‹è¯•é¡µé¢å·²åŠ è½½', 'success');
            log('æœåŠ¡å™¨åœ°å€ï¼š' + window.location.origin, 'info');
            log('å‡†å¤‡å¼€å§‹æµ‹è¯•...', 'info');
        };
    </script>
</body>
</html>
